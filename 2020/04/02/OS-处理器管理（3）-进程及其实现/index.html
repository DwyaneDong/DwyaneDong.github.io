<!DOCTYPE html>












  


<html class="theme-next gemini use-motion" lang="zh-CN">
<head><meta name="generator" content="Hexo 3.8.0">
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
























<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2">

<link rel="stylesheet" href="/css/main.css?v=7.0.1">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=7.0.1">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=7.0.1">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=7.0.1">


  <link rel="mask-icon" href="/images/logo.svg?v=7.0.1" color="#222">







<script id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '7.0.1',
    sidebar: {"position":"left","display":"post","offset":12,"onmobile":false,"dimmer":false},
    back2top: true,
    back2top_sidebar: false,
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  




  <meta name="description" content="OS—处理器管理（3）_进程及其实现知识点：  进程定义和属性 进程状态和转换 进程描述和组成 进程上下文切换与处理器状态转换 进程控制和管理  进程的定义和属性“进程“是操作系统中最重要最基本的概念，在多道程序系统提出后，为了刻画系统内部动态状况，描述运行程序活动规律而提出的新概念。 从原理角度来看，进程是支持程序执行的一种系统机制，是对处理器上运行程序的活动规律的抽象； 从现实角度看，进程是一">
<meta name="keywords" content="操作系统">
<meta property="og:type" content="article">
<meta property="og:title" content="OS--处理器管理（3）_进程及其实现">
<meta property="og:url" content="http://dongxh.cn/2020/04/02/OS-处理器管理（3）-进程及其实现/index.html">
<meta property="og:site_name" content="DongXuehui&#39;s Blog">
<meta property="og:description" content="OS—处理器管理（3）_进程及其实现知识点：  进程定义和属性 进程状态和转换 进程描述和组成 进程上下文切换与处理器状态转换 进程控制和管理  进程的定义和属性“进程“是操作系统中最重要最基本的概念，在多道程序系统提出后，为了刻画系统内部动态状况，描述运行程序活动规律而提出的新概念。 从原理角度来看，进程是支持程序执行的一种系统机制，是对处理器上运行程序的活动规律的抽象； 从现实角度看，进程是一">
<meta property="og:locale" content="zh-CN">
<meta property="og:image" content="http://dongxh.cn/2020/04/02/OS-处理器管理（3）-进程及其实现/1.png">
<meta property="og:image" content="http://dongxh.cn/2020/04/02/OS-处理器管理（3）-进程及其实现/2.png">
<meta property="og:image" content="http://dongxh.cn/2020/04/02/OS-处理器管理（3）-进程及其实现/3.png">
<meta property="og:image" content="http://dongxh.cn/2020/04/02/OS-处理器管理（3）-进程及其实现/4.png">
<meta property="og:image" content="http://dongxh.cn/2020/04/02/OS-处理器管理（3）-进程及其实现/5.png">
<meta property="og:image" content="http://dongxh.cn/2020/04/02/OS-处理器管理（3）-进程及其实现/6.png">
<meta property="og:image" content="http://dongxh.cn/2020/04/02/OS-处理器管理（3）-进程及其实现/7.png">
<meta property="og:updated_time" content="2020-04-02T08:27:57.892Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="OS--处理器管理（3）_进程及其实现">
<meta name="twitter:description" content="OS—处理器管理（3）_进程及其实现知识点：  进程定义和属性 进程状态和转换 进程描述和组成 进程上下文切换与处理器状态转换 进程控制和管理  进程的定义和属性“进程“是操作系统中最重要最基本的概念，在多道程序系统提出后，为了刻画系统内部动态状况，描述运行程序活动规律而提出的新概念。 从原理角度来看，进程是支持程序执行的一种系统机制，是对处理器上运行程序的活动规律的抽象； 从现实角度看，进程是一">
<meta name="twitter:image" content="http://dongxh.cn/2020/04/02/OS-处理器管理（3）-进程及其实现/1.png">






  <link rel="canonical" href="http://dongxh.cn/2020/04/02/OS-处理器管理（3）-进程及其实现/">



<script id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>OS--处理器管理（3）_进程及其实现 | DongXuehui's Blog</title>
  












  <noscript>
  <style>
  .use-motion .motion-element,
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-title { opacity: initial; }

  .use-motion .logo,
  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript><!-- hexo-inject:begin --><!-- hexo-inject:end -->

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">

  
  
    
  

  <!-- hexo-inject:begin --><!-- hexo-inject:end --><div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">DongXuehui's Blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
    
    
  </div>

  <div class="site-nav-toggle">
    <button aria-label="切换导航栏">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>



<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-home">

    
    
    
      
    

    

    <a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i> <br>首页</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-about">

    
    
    
      
    

    

    <a href="/about/" rel="section"><i class="menu-item-icon fa fa-fw fa-user"></i> <br>关于</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-tags">

    
    
    
      
    

    

    <a href="/tags/" rel="section"><i class="menu-item-icon fa fa-fw fa-tags"></i> <br>标签</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-categories">

    
    
    
      
    

    

    <a href="/categories/" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i> <br>分类</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-archives">

    
    
    
      
    

    

    <a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i> <br>归档</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-schedule">

    
    
    
      
    

    

    <a href="/schedule/" rel="section"><i class="menu-item-icon fa fa-fw fa-calendar"></i> <br>日程表</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-sitemap">

    
    
    
      
    

    

    <a href="/sitemap.xml" rel="section"><i class="menu-item-icon fa fa-fw fa-sitemap"></i> <br>站点地图</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-commonweal">

    
    
    
      
    

    

    <a href="/404/" rel="section"><i class="menu-item-icon fa fa-fw fa-heartbeat"></i> <br>公益 404</a>

  </li>

      
      
    </ul>
  

  

  
</nav>



  



</div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
            

          
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://dongxh.cn/2020/04/02/OS-处理器管理（3）-进程及其实现/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="dwyane_dongxh">
      <meta itemprop="description" content="I am willing to do anything but ordinary.">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="DongXuehui's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">OS--处理器管理（3）_进程及其实现

              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2020-04-02 16:17:21 / 修改时间：16:27:57" itemprop="dateCreated datePublished" datetime="2020-04-02T16:17:21+08:00">2020-04-02</time>
            

            
              

              
            
          </span>

          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h1 id="OS—处理器管理（3）-进程及其实现"><a href="#OS—处理器管理（3）-进程及其实现" class="headerlink" title="OS—处理器管理（3）_进程及其实现"></a>OS—处理器管理（3）_进程及其实现</h1><p>知识点：</p>
<ul>
<li>进程定义和属性</li>
<li>进程状态和转换</li>
<li>进程描述和组成</li>
<li>进程上下文切换与处理器状态转换</li>
<li>进程控制和管理</li>
</ul>
<h2 id="进程的定义和属性"><a href="#进程的定义和属性" class="headerlink" title="进程的定义和属性"></a>进程的定义和属性</h2><p>“进程“是操作系统中最重要最基本的概念，在多道程序系统提出后，为了刻画系统内部动态状况，描述运行程序活动规律而提出的新概念。</p>
<p>从<strong>原理角度</strong>来看，进程是支持程序执行的一种系统机制，是对处理器上运行程序的活动规律的抽象；</p>
<p>从<strong>现实角度</strong>看，进程是一种数据结构，用来准确刻画运行程序的状态和系统动态变化状况；</p>
<p>引入进程的两个目的：</p>
<ol>
<li>刻画程序的并发性；</li>
<li>解决资源的共享性<br>“可再入”程序指的是能够被多个程序同时调用的程序；“可再用”程序是指在被调用的过程中可以有自身修改，在调用它的程序退出之前不允许其他程序来调用。</li>
</ol>
<p>引入进程的概念后，程序与程序的执行（计算不再一一对应）。</p>
<p><strong>定义：进程是既能描述程序的并发执行，又能共享系统调用资源的一个基本单位。</strong>（操作系统要为引入进程而付出（进程占用的）空间和（进程调度的）时间的代价）。<strong>进程是具有独立功能的程序在某个数据集合上的一次运行活动，也是操作系统进行资源分配和保护的基本单位</strong>。</p>
<p>进程的属性：</p>
<ol>
<li>动态性。<br>因为进程是一次执行过程，具有生命周期，具有动态概念。</li>
<li>共享性。<br>同义程序同时运行在不同的数据集合上时构成不同进程，即多个不同进程可执行相同的程序。</li>
<li>独立性<br>每个进程是操作系统中的一个独立实体，有自己的虚存空间，程序计数器和内部状态。</li>
<li>制约性<br>进程因为共享资源或者协同工作产生相互制约关系，造成进程执行速度的不可预测性，必须对进程的执行次序或相对执行速度加以协调。</li>
<li>并发性<br>进程在时间上可以重叠，单处理器系统中并发执行，多处理器系统中可以并行执行。</li>
</ol>
<h2 id="进程的状态和转换"><a href="#进程的状态和转换" class="headerlink" title="进程的状态和转换"></a>进程的状态和转换</h2><h4 id="三态模型"><a href="#三态模型" class="headerlink" title="三态模型"></a>三态模型</h4><p>正如上面所说的，由于进程的动态性，为了便于管理，我们按照进程在执行过程中的不同情况，至少给其定义三种进程状态：</p>
<ol>
<li>运行态（running）：进程占有处理器正在运行的状态</li>
<li>就绪态（ready）：进程具备运行条件，等待系统分配处理器以便运行的状态</li>
<li>等待态（wait）：又称阻塞态（blocked）或者睡眠态（sleep），指进程不具备运行条件，正在等待某个事件完成的状态。</li>
</ol>
<p>处于运行态的进程个数不能大于处理器个数。</p>
<p><img src="1.png" style="zoom:50%;"></p>
<h4 id="七态模型"><a href="#七态模型" class="headerlink" title="七态模型"></a>七态模型</h4><p>有时为了便于管理，会引进新的状态：</p>
<ol>
<li>新建态（new）：进程被创建时的状态，尚未进入就绪队列。</li>
<li>终止态（exit）：进程完成任务到达正常结束点，或者出现无法克服的错误而异常终止，或被操作系统及有终止权的进程所终止时所处的状态。不再被调度，等待被撤销。</li>
<li>挂起态（suspend）：当系统资源尤其是内存资源已经不能满足进程运行的要求时，必须把某些进程挂起，<strong>对换到磁盘对换区中</strong>，释放占用的某些资源，暂时不参与低级调度，还有很多原因，</li>
</ol>
<p><img src="2.png" style="zoom:50%;"></p>
<p>挂起就绪态（ready suspend）表明进程具备运行条件，但目前在外存中，只有当它被对换到内存才能被调度执行；</p>
<p>挂起等待态（blocked suspend）表明进程正在等待某一个事件发生且也在外存中。</p>
<p>在一个实际的操作系统中，为了方便管理和调度往往设置多种进程状态。如Linux主要的进程状态有5种。</p>
<h2 id="进程的描述和组成"><a href="#进程的描述和组成" class="headerlink" title="进程的描述和组成"></a>进程的描述和组成</h2><h4 id="进程映像"><a href="#进程映像" class="headerlink" title="进程映像"></a>进程映像</h4><p><img src="3.png" style="zoom:40%;"></p>
<ul>
<li>进程映像：进程某时刻的内容和状态集合。<ul>
<li>进程控制块：存储进程标志信息、现场信息和控制信息。</li>
<li>进程程序块：被进程执行的程序。</li>
<li>进程核心栈：用来保存中断/异常现场，保存内核函数调用的参数、局部变量和返回地址。</li>
<li>进程数据块：进程的私有地址空间，存放各种私有数据，包括用户栈。</li>
</ul>
</li>
</ul>
<p>进程上下文（process context）：进程物理实体和支持进程运行的环境。如硬件寄存器、程序状态字寄存器、支持动态地址转换的页表和相关的核心数据结构。</p>
<p>当系统调度新进程占有处理器时，新老进程随之发生上下文切换。进程的运行被认为是在上下文中执行。</p>
<p>进程上下文组成：</p>
<ol>
<li>用户级上下文（user level context）：由程序块、数据块、共享内存区、用户栈组成，占用进程的虚存空间。</li>
<li>系统级上下文（register context）：有进程控制块、内存管理信息、核心栈等操作系统管理进程所需要的信息组成。</li>
<li>寄存器上下文（system level context）：由处理器状态寄存器、指令计数器、栈指针、通用寄存器等组成。</li>
</ol>
<h4 id="进程控制块"><a href="#进程控制块" class="headerlink" title="进程控制块"></a>进程控制块</h4><p>每个进程有且仅有一个程序控制块（Process Control Block , PCB）,或称进程描述符（process descriptor），是进程存在的唯一标识。是操作系统用于记录和刻画进程状态及有关信息的数据结构。也是操作系统掌握进程的唯一资料结构，它包括进程执行时的情况，以及进程让出处理器后所处的状态、断点等信息。</p>
<p>PCB包含以下三类信息</p>
<ol>
<li>标识信息。用于唯一地标识一个进程，分为用户使用的外部标识符和系统使用的内部标识号。</li>
<li>现场信息。用于保留进程在运行时存放在处理器现场中的各种信息。</li>
<li>控制信息。用于管理和调度进程。</li>
</ol>
<p><strong>PCB是操作系统中最重要的数据结构，它包含管理进程所需要的全部信息。</strong></p>
<p>PCB的集合实际上定义了一个操作系统当前的状态，其使用权和修改权均属于操作系统。操作系统根据PCB对并发执行的进程进行控制和管理，进程借助于PCB才能被调度执行。</p>
<h4 id="进程队列及其管理"><a href="#进程队列及其管理" class="headerlink" title="进程队列及其管理"></a>进程队列及其管理</h4><p>把<strong>处于同一状态</strong>的所有进程的PCB链接在一起的数据结构称为<strong>进程队列（process queue）</strong>。通常有两种组织队列的方式：</p>
<p><strong>链接方式</strong></p>
<p>对于同一状态进程的PCB，通过PCB中的链接指针将其链接成队列，单向指针和双向指针都可以。单向队列编号为0排在队尾；双向队列对于后向指针来说编号为0在队尾，对于前向指针，编号为0在前面</p>
<p>不同状态的进程可以排成不同的队列，如运行队列，就绪队列和等待队列等。运行队列通常只有一个进程；就绪队列可以按照优先级或者FCFS（First Come First Serve）的原则排队，也可以按照进程的优先级高低分成多个就绪队列；等待队列通常有多个，对应不同的等待状态，如等待I/O操作完成，等待信号量等。此外还可以将空闲PCB结构链接成自由队列以便使用。</p>
<p>当某个事件发生，状态发生改变时，有个进程会出队，有的进程会进队。处理器调度中负责进程入队和出队工作的功能模块称为<strong>队列管理模块</strong>，其任务就是对进程的PCB重新排队并修改其状态和相应链接结构。</p>
<p><img src="4.png" style="zoom:50%;"></p>
<p><strong>索引方式</strong></p>
<p>索引方式利用索引表记录不同状态进程的PCB地址或者在PCB表中的编号，系统建立不同状态的索引表，各个索引表在内存中的起始位置放在内核占用指针单元中。</p>
<p><img src="5.png" style="zoom:50%;"></p>
<h2 id="进程上下文切换于处理器状态转换"><a href="#进程上下文切换于处理器状态转换" class="headerlink" title="进程上下文切换于处理器状态转换"></a>进程上下文切换于处理器状态转换</h2><h4 id="进程上下文切换"><a href="#进程上下文切换" class="headerlink" title="进程上下文切换"></a>进程上下文切换</h4><p><strong>中断和异常是激活操作系统的仅有方法。</strong>这里说的激活操作系统的意思是指让操作系统内核获得处理器控制权，也就是进入内核态。因为只有操作系统有权利使用修改进程PCB，所以<strong>进程切换必定发生在内核态而非用户态</strong>。</p>
<p><img src="6.png" style="zoom:50%;"></p>
<p>思考题：程序状态字PSW和进程控制块PCB的区别？</p>
<p><strong>进程上下文切换时机</strong></p>
<p>内核中不能立即进行调度和切换的情况有：内核正在处理中断的过程中，进程运行在内核临界区中，内核处在需要屏蔽中断的原子操作中。</p>
<p>如果在上述过程中产生引起调度的条件而不能马上进行调度和切换，系统采用将请求调度标志延迟到敏感性操作完成后再进行。</p>
<p>为此，Linux在进程<code>task_struct</code>中设计了重调度标志<code>need_resched</code>,V２.６版中，被移至<code>thread_info</code> 结构体中，用标志<code>TIF_NEED_RESCHED</code> 表示 。调度时机：</p>
<ol>
<li>主动调度：指调用<code>schedule()</code>函数来释放CPU,引起新一轮调度，通常发生在当前进程状态被改变,如:执行了<code>read()</code>、<code>write()</code>、<code>exit()</code>等系统调用，导致进程终止、进程阻塞等。</li>
<li>被动调度：指发生了引起调度的条件, 这时仅置进程<code>TIF_NEED_RESCHED</code>调度标志。调度标志设置有以下四种情况：<ol>
<li>时钟中断中调用函数<code>scheduler_tick()</code>，查看当前进程的时间片是否耗尽，如果是，则设置重调度标志；</li>
<li>函数<code>try_to_wake_up( )</code>将阻塞的进程唤醒，把它加入运行队列时，如果其优先级比当前正在运行进程的优先级高，设置重调度标志。</li>
<li>设置应用进程优先级参数nice值、创建新进程、SMP负载均衡时都可能使高优先级进程进入就绪状态，也可能设置重调度标志；</li>
<li>执行<code>sched_setscheduler( )</code>（设置调度策略）、<code>sched_yield</code>( 暂时让出处理器)、<code>pause( )</code>（暂停）等系统调用，均要设置重调度标志。</li>
</ol>
</li>
</ol>
<p>每当中断处理和系统调用处理结束返回时，在<code>ret_from_sys_call</code>代码段中会主动测试调度标志，若置位则调用<code>schedule()</code>函数.</p>
<h4 id="处理器状态转换"><a href="#处理器状态转换" class="headerlink" title="处理器状态转换"></a>处理器状态转换</h4><p>步骤：</p>
<ol>
<li>保存被中断进程的处理器现场信息；</li>
<li>处理器从用户态转换到核心态，以便执行服务程序或中断处理程序；</li>
<li>如果处理中断，可根据规定的中断级设置中断屏蔽位；</li>
<li>根据系统调用号或中断号，从系统调用表或中断入口表找到服务程序或中断处理程序地址。</li>
</ol>
<p>处理器上执行进程的活动范围必在以下四个情况下：</p>
<ol>
<li>用户空间中，处于进程上下文，用户进程在运行，使用用户栈。</li>
<li>内核空间中，处于进程上下文，内核代表某进程在运行，使用核心栈。</li>
<li>内核空间中，处于中断上下文，与任何进程无关，中断服务程序正在处理特定中断，Intel x86未提供中断栈，借用核心栈。</li>
<li>内核空间中，内核线程(无用户地址空间的进程)运行于内核态。</li>
</ol>
<h4 id="Linux中进程上下文切换"><a href="#Linux中进程上下文切换" class="headerlink" title="Linux中进程上下文切换"></a>Linux中进程上下文切换</h4><p><img src="7.png" style="zoom:50%;"></p>
<h2 id="进程控制和管理"><a href="#进程控制和管理" class="headerlink" title="进程控制和管理"></a>进程控制和管理</h2><p>原语是在操作系统中调用核心层子程序的指令。与一般广义指令的区别在于它是<strong>不可中断</strong>的，而且总是作为一个基本单位出现。它与一般过程的区别在于：它们是“原子操作”（primitive or atomic action）。所谓原子操作，是指一个操作中的所有动作要么全做，要么全不做。换言之，它是一个不可分割的基本单位，因此，在执行过程中不允许被中断。<strong>原子操作在管态下执行，常驻内存</strong>。原语的作用是为了实现进程的通信和控制，系统对进程的控制如不使用原语，就会造成其状态的不确定性，从而达不到进程控制的目的</p>
<p>进程管理原语</p>
<h4 id="进程创建"><a href="#进程创建" class="headerlink" title="进程创建"></a>进程创建</h4><ol>
<li>在进程列表中增加一项，从PCB池中申请一个空闲PCB，为新进程分配惟一的进程标识符；</li>
<li>为新进程的进程映像分配地址空间，以便容纳进程实体。进程管理程序确定加载到进程地址空间中的程序；</li>
<li>为新进程分配除主存空间外的其他各种所需资源；</li>
<li>初始化PCB，如进程标识符、处理器初始状态、进程优先级等；</li>
<li>把新进程状态置为就绪态，并移入就绪进程队列；</li>
<li>通知操作系统的某些模块，如记账程序、性能监控程序。</li>
</ol>
<h4 id="进程撤销"><a href="#进程撤销" class="headerlink" title="进程撤销"></a>进程撤销</h4><ol>
<li>根据撤销进程标识号，从相应队列中找到并移出它；</li>
<li>将该进程拥有的资源归还给父进程或操作系统；</li>
<li>若该进程拥有子进程，先撤销它的所有子进程，以防它们脱离控制；</li>
<li>回收PCB，并归还到PCB池。</li>
</ol>
<h4 id="进程阻塞"><a href="#进程阻塞" class="headerlink" title="进程阻塞"></a>进程阻塞</h4><ol>
<li>停止进程执行，保存现场信息到PCB；</li>
<li>修改进程PCB有关内容，如进程状态由运行态改为等待态等，并把修改状态后的进程移入相应事件的等待队列中；</li>
<li>转入进程调度程序去调度其他进程运行。</li>
</ol>
<h4 id="进程唤醒"><a href="#进程唤醒" class="headerlink" title="进程唤醒"></a>进程唤醒</h4><ol>
<li>从相应的等待队列中移出进程；</li>
<li>修改进程PCB的有关信息，如进程状态改为就绪态，并移入就绪队列；</li>
<li>若被唤醒进程比当前运行进程优先级高，重新设置调度标志。</li>
</ol>
<h4 id="进程的挂起"><a href="#进程的挂起" class="headerlink" title="进程的挂起"></a>进程的挂起</h4><ol>
<li>检查要被挂起的进程的状态</li>
<li>若处于活动就绪态，则修改为挂起就绪态</li>
<li>若处于等待态，则修改为挂起等待态</li>
<li>被挂起的进程PCB的非常驻部分要交换到磁盘对换区</li>
</ol>
<h4 id="进程的激活"><a href="#进程的激活" class="headerlink" title="进程的激活"></a>进程的激活</h4><ol>
<li>把被挂起进程PCB的非常驻部分掉入内存</li>
<li>修改为对应的状态（等待或者就绪）</li>
<li>将进程移入相应队列中</li>
</ol>
<p>挂起原语既可由自己也可由其他进程调用，而激活原语只能由其他进程调用。</p>

      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/操作系统/" rel="tag"># 操作系统</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2020/03/30/OS-处理器管理（1）-中断技术/" rel="next" title="OS--处理器管理（2）_中断技术">
                <i class="fa fa-chevron-left"></i> OS--处理器管理（2）_中断技术
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>


  </div>


          </div>
          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">dwyane_dongxh</p>
              <div class="site-description motion-element" itemprop="description">I am willing to do anything but ordinary.</div>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives/">
                
                    <span class="site-state-item-count">14</span>
                    <span class="site-state-item-name">日志</span>
                  </a>
                </div>
              

              

              
                
                
                <div class="site-state-item site-state-tags">
                  
                    
                      <a href="/tags/">
                    
                  
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">4</span>
                    <span class="site-state-item-name">标签</span>
                  </a>
                </div>
              
            </nav>
          

          

          

          

          

          
          

          
            
          
          

        </div>
      </div>

      
      <!--noindex-->
        <div class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
            
            
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#OS—处理器管理（3）-进程及其实现"><span class="nav-number">1.</span> <span class="nav-text">OS—处理器管理（3）_进程及其实现</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#进程的定义和属性"><span class="nav-number">1.1.</span> <span class="nav-text">进程的定义和属性</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#进程的状态和转换"><span class="nav-number">1.2.</span> <span class="nav-text">进程的状态和转换</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#三态模型"><span class="nav-number">1.2.0.1.</span> <span class="nav-text">三态模型</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#七态模型"><span class="nav-number">1.2.0.2.</span> <span class="nav-text">七态模型</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#进程的描述和组成"><span class="nav-number">1.3.</span> <span class="nav-text">进程的描述和组成</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#进程映像"><span class="nav-number">1.3.0.1.</span> <span class="nav-text">进程映像</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#进程控制块"><span class="nav-number">1.3.0.2.</span> <span class="nav-text">进程控制块</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#进程队列及其管理"><span class="nav-number">1.3.0.3.</span> <span class="nav-text">进程队列及其管理</span></a></li></ol></li></ol><li class="nav-item nav-level-2"><a class="nav-link" href="#进程上下文切换于处理器状态转换"><span class="nav-number">1.4.</span> <span class="nav-text">进程上下文切换于处理器状态转换</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#进程上下文切换"><span class="nav-number">1.4.0.1.</span> <span class="nav-text">进程上下文切换</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#处理器状态转换"><span class="nav-number">1.4.0.2.</span> <span class="nav-text">处理器状态转换</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Linux中进程上下文切换"><span class="nav-number">1.4.0.3.</span> <span class="nav-text">Linux中进程上下文切换</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#进程控制和管理"><span class="nav-number">1.5.</span> <span class="nav-text">进程控制和管理</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#进程创建"><span class="nav-number">1.5.0.1.</span> <span class="nav-text">进程创建</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#进程撤销"><span class="nav-number">1.5.0.2.</span> <span class="nav-text">进程撤销</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#进程阻塞"><span class="nav-number">1.5.0.3.</span> <span class="nav-text">进程阻塞</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#进程唤醒"><span class="nav-number">1.5.0.4.</span> <span class="nav-text">进程唤醒</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#进程的挂起"><span class="nav-number">1.5.0.5.</span> <span class="nav-text">进程的挂起</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#进程的激活"><span class="nav-number">1.5.0.6.</span> <span class="nav-text">进程的激活</span></a></li></ol></li></div>
            

          </div>
        </div>
      <!--/noindex-->
      

      

    </div>
  </aside>
  


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2020</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">dwyane_dongxh</span>

  

  
</div>


  <div class="powered-by">由 <a href="https://hexo.io" class="theme-link" rel="noopener" target="_blank">Hexo</a> 强力驱动 v3.8.0</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 – <a href="https://theme-next.org" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> v7.0.1</div>




        








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

    

    
  </div>

  

<script>
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>
















  
  











  
  <script src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script src="/lib/three/three.min.js"></script>

  
  <script src="/lib/three/three-waves.min.js"></script>


  


  <script src="/js/src/utils.js?v=7.0.1"></script>

  <script src="/js/src/motion.js?v=7.0.1"></script>



  
  


  <script src="/js/src/affix.js?v=7.0.1"></script>

  <script src="/js/src/schemes/pisces.js?v=7.0.1"></script>




  
  <script src="/js/src/scrollspy.js?v=7.0.1"></script>
<script src="/js/src/post-details.js?v=7.0.1"></script>



  


  <script src="/js/src/next-boot.js?v=7.0.1"></script>


  

  

  

  


  


  




  

  

  
  

  
  

  
    
      <script type="text/x-mathjax-config">
  

  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$', '$'], ['\\(', '\\)'] ],
      processEscapes: true,
      skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    },
    TeX: {
      
      equationNumbers: {
        autoNumber: 'AMS'
      }
    }
  });
  MathJax.Hub.Register.StartupHook('TeX Jax Ready', function() {
    MathJax.InputJax.TeX.prefilterHooks.Add(function(data) {
      if (data.display) {
        var next = data.script.nextSibling;
        while (next && next.nodeName.toLowerCase() === '#text') { next = next.nextSibling }
        if (next && next.nodeName.toLowerCase() === 'br') { next.parentNode.removeChild(next) }
      }
    });
  });
</script>

<script type="text/x-mathjax-config">
  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for (i = 0; i < all.length; i += 1) {
      document.getElementById(all[i].inputID + '-Frame').parentNode.className += ' has-jax';
    }
  });
</script>
<script src="//cdn.jsdelivr.net/npm/mathjax@2/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!-- hexo-inject:begin --><!-- Begin: Injected MathJax -->
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({"tex2jax":{"inlineMath":[["$","$"],["\\(","\\)"]],"skipTags":["script","noscript","style","textarea","pre","code"],"processEscapes":true},"TeX":{"equationNumbers":{"autoNumber":"AMS"}}});
</script>

<script type="text/x-mathjax-config">
  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
      all[i].SourceElement().parentNode.className += ' has-jax';
    }
  });
</script>

<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js">
</script>
<!-- End: Injected MathJax -->
<!-- hexo-inject:end -->

    
  


  

  

  

  

  

  

  

  

  

  

  

</body>
</html>
